import RPi.GPIO as GPIO
import time
from shifter import Shifter
from problem5 import Bug

try:
    # setup the shifter and bug
    sh = Shifter(23, 25, 24)

    print("Testing wrap OFF (should bounce at the ends)...")
    bug = Bug(sh, timestep=0.05, x=4, isWrapOn=False)
    bug.start()
    for _ in range(100):          # run for 100 steps
        bug.repeat()
    bug.stop()

    time.sleep(1)  # short pause between tests

    print("Testing wrap ON (should loop around at ends)...")
    bug = Bug(sh, timestep=0.05, x=4, isWrapOn=True)
    bug.start()
    for _ in range(100):          # run for 100 steps
        bug.repeat()
    bug.stop()

except KeyboardInterrupt:
    pass
finally:
    GPIO.cleanup()
    print("Test complete.")

